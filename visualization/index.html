<html>
  <head>
    <link rel="stylesheet" href="css/styles.css">
<!--     <script src="https://cdn.jsdelivr.net/npm/p5@1.6.0/lib/p5.js"></script>
 -->  </head>
  <body>

    <div id="nav">
      <a href="index.html">Model Settings</a><!--  |  <a href="single-site.html" >Single Site View</a> | <a href="network.html">Network View</a> -->
    </div>

    <main>

      <form id="modelSettings">
        <div class="formcontainer">
          <h3>Aggregtion Characteristics:</h3>
          <div class="slideparent">
            <label for="participants" class="slider-label">Amount of Participants</label>
            <div class="slidecontainer">
              <input type="range" min="2" max="1000" value="100" class="slider" id="participants" name="participants" oninput="updateSliderParticipants()"> 
            </div>
            <span class="tooltip"><span id='participantAmt'></span> participants<span class="tooltiptext">A participant can be any Con Ed customer with a dedicated smart meter.</span></span>
          </div>

          <div class="slideparent">
            <label for="reservation" class="slider-label">Total Reservation Wattage</label>
            <div class="slidecontainer">
              <input type="range" min="50" max="500" value="50" class="slider" id="reservation" name="reservation" oninput="updateSliderReservation()">
            </div>   
            <span class="tooltip"><span id='reservationAmt'></span> kW<span class="tooltiptext">50kW is the minimum reservation size for an agregation of participants.</span></span>
          </div>
            Average Watt reservation per participant: <span id='avgRes'></span> kW

          <h3>Participant Characteristics:</h3>

          <h4>Con Ed DR Programs</h4>
          <input type="checkbox" id="CSRP" name="CSRP" value="true" checked>
          <label for="CSRP" class="tooltip">CSRP<span class="tooltiptext">Commercial System Relief Program events are typically system wide calls scheduled with 21 hours advance notice. The goal of CSRP is peak shaving.</span></label><br>
          <input type="checkbox" id="DLRP" name="DLRP" value="true" checked>
          <label for="DLRP" class="tooltip">DLRP<span class="tooltiptext">Distribution Load Relief Program events are typically network specific (not system wide) and are determined based on an individual network's needs. DLRP notifies participants 2 hours or less in advance to address immediate grid reliability issues.</label></label><br>

          <h4>Network</h4>
          The Con Ed system covers all 5 NYC boroughs and Westchester. It is composed of <a href='https://cdnc-dcxprod2-sitecore.azureedge.net/-/media/files/coned/documents/save-energy-money/rebates-incentives-tax-credits/smart-usage-rewards/networks-and-tiers.pdf' target="_blank" class="tooltip">83 networks<span class="tooltiptext">Detailed network info can be found here.</span></a>. In some cases, payments vary based on network and borough.<br>
          
          <p>
            <select name="network" id="network" onchange="updateNetwork()">
            </select>
          </p>

          <div id="networkInfo"></div>

          <!-- <h4>Tiers</h4>

          <p>
            <input type="radio" id="tier1" name="tier" value="tier1" checked>
            <label for="tier 1"class="tooltip">Tier 1<span class="tooltiptext">Tier 1 Networks cover 71 of 81 networks in the system. (All networks not listed below in T2 tooltip are T1.)</span></label><br>
            <input type="radio" id="tier2" name="tier" value="tier2" checked>
            <label for="tier2" class="tooltip">Tier 2<span class="tooltiptext">Tier 2 Networks are considered higher priority and pay $25/kW-month DLRP reservation rate. These networks are Borough Hall, Central Bronx, Fordham, Northeast Bronx, Ocean Parkway, Ridgewood, Southeast Bronx, West Bronx, Williamsburg, Jackson Heights</span></label><br>
            <input type="radio" id="randTier" name="tier" value="randomize">
            <label for="random">Randomize participant tiers</label><br>
          </p> -->

          <h3>Hardware Selection</h3>

          <h4>LiFePO4 Power Station</h4>

          <p>
            <input type="radio" id="p1" name="package" value="1" checked>
            <label for="p1" >100Wh</label><br>
<!--             <div class="package-details">100W PV module, 1500Wh battery, hybrid inverter</div><br> -->

            <input type="radio" id="p2" name="package" value="2">
            <label for="p2">270Wh</label><br>
<!--             <div class="package-details">100W PV module, 500Wh battery, hybrid inverter</div><br>  -->

            <input type="radio" id="p3" name="package" value="3">
            <label for="p3">540Wh</label><br>
            <!-- <div class="package-details">Includes: 400W PV module, 1200Wh battery, hybrid inverter</div><br>  -->

            <input type="radio" id="p4" name="package" value="4">
            <label for="p4">650Wh</label><br>
<!--             <div class="package-details">Includes: 400W PV module, 1200Wh battery, hybrid inverter</div><br> 
 -->
            <input type="radio" id="p5" name="package" value="5">
            <label for="p5">1000Wh</label><br>

<input type="radio" id="p6" name="package" value="6">
            <label for="p6">1260Wh</label><br>

            <input type="radio" id="p7" name="package" value="7">
            <label for="p7">1500Wh</label><br>

            <input type="radio" id="p8" name="package" value="8">
            <label for="p7">2000Wh</label><br>


             <!-- Includes: PV module, grid-tied inverter --></div><br>
            <!--<input type="radio" id="p3" name="package" value="3">
            <label for="p3">Package 3: Off-grid Solar</label><br>
            <div class="package-details">Includes: PV module, battery, off-grid inverter</div><br>
            <input type="radio" id="p4" name="package" value="4">
            <label for="p4">Package 4: Battery</label><br>
            <div class="package-details">Includes: battery, hybrid inverter</div><br>
            <input type="radio" id="p5" name="package" value="5">
            <label for="p4">Custom Package</label><br>

            <div id='customPackageContainer'>
              <label for="pvPower" class="slider-label">PV Array Watts</label>
              <div class="slidecontainer">
              <input type="range" min="50" max="500" value="50" class="slider" id="pvPower" name="pvPower"> 
            </div>
            </div> -->

          </p>

          <h4>PV Watts</h4>
          <div class="slideparent">
            <label for="participants" class="slider-label">Watts</label>
            <div class="slidecontainer">
              <input type="range" min="2" max="1000" value="100" class="slider" id="pvWatts" name="participants" oninput=""> 
            </div>
          </div>

          <input type="checkbox" id="smart-relay" name="smart-relay" value="true" checked>
          <label for="smart-relay">Include smart relays/outlets</label><br>
          <!-- <input type="checkbox" id="PV" name="PV" value="PV" checked>
          <label for="PV">solar panel</label><br>
          <input type="checkbox" id="battery" name="battery" value="battery" checked>
          <label for="battery">battery</label><br>
          <input type="checkbox" id="relay" name="relay" value="relay" checked>
          <label for="relay">smart relay</label> -->

     <!--      <h4>Communication and Control Methods</h4>
          <input type="checkbox" id="email" name="email" value="email" checked>
          <label for="email">Email</label><br>
          <input type="checkbox" id="phone" name="phone" value="phone" checked>
          <label for="phone">Phone</label><br>
          <input type="checkbox" id="sms" name="sms" value="sms" checked>
          <label for="sms">SMS</label> -->

          <h3>Model Settings</h3>
          <input type="checkbox" id="prediction" name="prediction" value="true" checked>
          <label for="prediction">Prediction Mode</label><br>
          <!-- <div class="slidecontainer">
            <input type="range" min="1" max="30" value="30" class="slider" id="days" onchange="updateSlider(this.id,this.value,'dayAmt')">
          </div>   -->
          <h4>Time Period</h4>
          <input type="radio" id="fullseason" name="timeperiod" value="fullseason">
          <label for="fullseason">Full 2022 Season (May 1 - Sept 31)</label><br>
          <input type="radio" id="month" name="timeperiod" value="august" checked>
          <label for="month">All of August 2022</label><br>
          <input type="radio" id="week" name="timeperiod" value="jWeek">
          <label for="week">1st Week of July 2022 (0 events)</label><br>
          <input type="radio" id="week" name="timeperiod" value="aWeek">
          <label for="week">1st Week of August 2022 (2 events)</label><br>
          <input type="radio" id="day" name="timeperiod" value="day">
          <label for="day">1 Day (no event)</label><br>

          <!-- <div class="slideparent">
            <label for="rSpeed" class="slider-label">Speed: </label>
            <div class="slidecontainer">
              <input type="range" min="1" max="100" value="75" class="slider" id="rSpeed" name="rSpeed" onchange="updateSliderSpeed(this.id)">
            </div>

            <span id='rSpeedAmt'></span><br>
            1 hour = <span id='millis'></span> seconds

          </div> -->

          <!-- <h4>Optimization</h4>
          <input type="radio" id="optimize-energy" name="pc" value="optimize">
          <label for="optimize-energy">Optimize Participants for Energy Efficiency</label><br>
          <input type="radio" id="optimize-income" name="pc" value="optimize-income" checked>
          <label for="optimize">Optimize Participants for Maximizing Income</label><br> -->
          <p>
            <button type="submit" name="run" value="network"  formaction="network.html">Run Network</button>
            <button type="submit" name="run" value="single" formaction="single-site.html">Run Individual</button>

          </p>
      </form> 

    </main>
    <script src="js/AggregatorModel.js"></script>
    <script src="js/formhandler.js"></script>

  </body>
</html>